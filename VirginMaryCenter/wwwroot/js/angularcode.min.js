(function () {
    var ocrApp = angular.module('app', ['ngSanitize']);

    
    /*    $.connection.hub.url = OCRServiceSyncUrl;
        $.connection.hub.logging = true;
        $.connection.hub.start();
        */
    

  /*  $.connection.hub.error(function (err) {
        console.log('SignalR error occured: ' + err);
    });
   

    //this adds a service called chat that you can then use in the controller by passing it as a parameter
    angular.module('app')
        .value('OCRSync', $.connection.OCRsync);
 */
})();
angular.module('app').directive('ngEsc', function () {
    return function (scope, element, attrs) {
        element.bind("keydown keypress keyup", function (event) {
            if (event.which === 27) {
                scope.$apply(function () {
                    scope.$eval(attrs.ngEsc);
                });

                event.preventDefault();
            }
        });
    };
});    
 
angular.module('app').controller('eventCtrl', ['$scope', '$window', '$http', '$sce', function ($scope, $window, $http, $sce) {
    $scope.loading = true;
    $scope.events = [];

    $scope.eventView = function () {
        $scope.loading = true;

        $http({
            method: 'GET',
            url: "/api/events",
            params: {
            }
        }).then(function successCallback(response) {
            console.log("test");
            $scope.events = JSON.parse(response.data).data;
            console.log($scope.events);
            $scope.loading = false;
        }, function errorCallback(response) {
            $scope.hasError = true;
        });
    };


    $scope.eventView();

}]);